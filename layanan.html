<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Layanan Tambahan - Aldotune</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><text x='50%' y='50%' dy='.35em' text-anchor='middle' font-size='65' font-family='Arial, sans-serif' font-weight='bold' fill='%23000000'>a</text></svg>">

    <style>
        /* --- 1. GLOBAL RESET --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        
        /* Body dikunci agar scroll hanya terjadi di main-wrapper */
        body { 
            background-color: #f6f6f6; 
            display: flex; 
            flex-direction: column; 
            height: 100vh; 
            overflow: hidden; /* Mencegah body scroll ganda */
            color: #333; 
        }
        a { text-decoration: none; color: inherit; }

        /* --- 2. HEADER (Fixed) --- */
        .top-header {
            height: 64px; 
            background-color: #ffffff; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            padding: 0 20px; 
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); 
            position: fixed; /* Header Melayang */
            top: 0; left: 0; right: 0;
            z-index: 100;
        }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .btn-back { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; transition: background 0.2s; color: #555; }
        .btn-back:hover { background-color: #f0f0f0; }
        .btn-back svg { width: 24px; height: 24px; fill: currentColor; }
        .page-title { font-size: 18px; font-weight: 600; color: #222; }
        .user-profile { display: flex; align-items: center; text-align: right; gap: 12px; cursor: pointer; }
        .user-details h4 { font-size: 13px; font-weight: 600; color: #333; margin: 0; text-transform: capitalize; }
        .avatar-icon { width: 34px; height: 34px; fill: #999; flex-shrink: 0; }

        /* Dropdown */
        .logout-menu { position: absolute; top: 60px; right: 20px; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden; display: none; z-index: 101; min-width: 200px; border: 1px solid #eee; }
        .dropdown-item { display: flex; align-items: center; width: 100%; padding: 12px 20px; background: transparent; border: none; text-align: left; cursor: pointer; color: #555; font-size: 14px; transition: 0.2s; }
        .dropdown-item:hover { background-color: #f9f9f9; color: #000; }
        .dropdown-item svg { width: 18px; height: 18px; margin-right: 12px; fill: #777; }
        .dropdown-divider { height: 1px; background-color: #eee; margin: 0; }

        /* --- 3. MAIN CONTENT (Scrollable) --- */
        .main-wrapper { 
            margin-top: 64px; /* Memberi ruang untuk header */
            flex-grow: 1; 
            width: 100%; 
            height: calc(100vh - 64px); /* Sisa tinggi layar */
            overflow-y: auto; /* Scroll aktif di sini */
            -webkit-overflow-scrolling: touch; /* Scroll smooth di tablet */
            padding-bottom: 150px; /* RUANG KOSONG DI BAWAH (Agar bisa di-scroll lebih jauh) */
        }

        .content-limit {
            max-width: 1100px; 
            margin: 0 auto;
        }

        .breadcrumb-container { padding: 25px 30px; font-size: 14px; color: #777; }
        .breadcrumb-container b { color: #333; }
        .chevron { margin: 0 8px; font-size: 12px; color: #ccc; }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 0 30px; /* Padding bawah dipindah ke main-wrapper */
        }

        /* Card Style */
        .service-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            padding: 25px;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .service-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-color: #1890ff;
        }

        .card-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 15px; }
        .icon-wrapper {
            width: 50px; height: 50px;
            background-color: #f0f7ff;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            color: #1890ff;
        }
        .icon-wrapper svg { width: 26px; height: 26px; fill: currentColor; }
        
        .status-badge {
            font-size: 11px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 20px;
            text-transform: uppercase;
        }
        .status-active { background-color: #f6ffed; color: #52c41a; border: 1px solid #b7eb8f; }

        .card-body h3 { font-size: 16px; font-weight: 700; margin-bottom: 8px; color: #333; }
        .card-body p { font-size: 13px; color: #666; line-height: 1.5; margin: 0; }

        /* Responsive */
        @media (max-width: 768px) {
            .top-header { padding: 0 15px; }
            .breadcrumb-container { padding: 20px; }
            .services-grid { grid-template-columns: 1fr; padding: 0 20px; }
            .user-details { display: none; }
        }
    </style>
</head>
<body>

    <header class="top-header">
        <div class="header-left">
            <a href="rumah.html" class="btn-back">
                <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </a>
            <div class="page-title">Layanan Tambahan</div>
        </div>

        <div class="user-profile" id="userMenuBtn">
            <div class="user-details">
                <h4 id="displayName">Memuat...</h4>
            </div>
            <svg class="avatar-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
        </div>

        <div class="logout-menu" id="logoutMenu">
            <a href="profil.html" class="dropdown-item">Profil</a>
            <a href="sandi.html" class="dropdown-item">Kata Sandi</a>
            <a href="layanan.html" class="dropdown-item">Layanan tambahan</a>
            <div class="dropdown-divider"></div>
            <button id="btnLogout" class="dropdown-item" style="color: #d93025;">Keluar</button>
        </div>
    </header>

    <main class="main-wrapper">
        <div class="content-limit">
            <div class="breadcrumb-container">
                Pengaturan <span class="chevron">â€º</span> <b>Layanan Tambahan</b>
            </div>

            <div class="services-grid">
                
                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Manajemen Katalog</h3>
                        <p>Kelola rilis musik, single, EP, dan album Anda. Distribusikan karya baru ke berbagai platform digital.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Analytics & Data</h3>
                        <p>Pantau performa streaming, pendengar bulanan, dan tren musik Anda dari berbagai DSP.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Alat Promosi</h3>
                        <p>Akses fitur Smart Link, Pitching Playlist, dan materi promosi untuk menjangkau lebih banyak pendengar.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Finance & Royalti</h3>
                        <p>Laporan pendapatan transparan, penarikan royalti, dan riwayat transaksi keuangan Anda.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Music Publishing</h3>
                        <p>Koleksi royalti mekanikal dan performing rights dari komposisi lagu Anda secara global.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.8-13h-2.9v1.2c-.8.2-1.4.6-1.8 1.1-.5.6-.7 1.3-.7 2.2 0 1.5.7 2.6 2 3.2.5.2 1.1.3 1.7.3 1.1 0 2-.4 2.7-1.2l-1.3-1.4c-.4.5-.8.7-1.3.7-.4 0-.7-.1-1-.3-.3-.2-.4-.6-.4-1.1 0-.6.2-1.1.5-1.4.3-.3.7-.5 1.1-.5.3 0 .7.1 1 .3l.4.3V7z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Perlindungan Hak Cipta</h3>
                        <p>Proteksi aset digital dan Content ID untuk memastikan karya Anda aman dari penggunaan ilegal.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.59 14.42c-.18.3-.56.4-.85.22-2.34-1.43-5.29-1.75-8.77-.96-.33.07-.66-.14-.74-.47-.07-.32.14-.65.47-.73 3.82-.87 7.11-.51 9.68.9.3.18.39.55.21.84zm1.22-2.71c-.23.37-.71.49-1.08.26-2.69-1.65-6.79-2.13-9.96-1.17-.41.13-.85-.11-.97-.52-.13-.41.11-.85.52-.97 3.62-1.1 8.16-.56 11.23 1.33.37.22.49.7.26 1.07zm.1-2.82c-3.22-1.91-8.53-2.09-11.61-1.15-.49.15-1.01-.13-1.16-.61-.15-.49.13-1.01.61-1.16 3.56-1.08 9.47-.86 13.13 1.31.45.27.6.85.33 1.3-.26.44-.84.59-1.3.31z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Spotify for Artists</h3>
                        <p>Verifikasi instan dan akses penuh ke profil artis Anda di Spotify. Atur bio, foto, dan playlist.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-header">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24"><path d="M12 13.5c2.48 0 4.5-2.02 4.5-4.5s-2.02-4.5-4.5-4.5-4.5 2.02-4.5 4.5 2.02 4.5 4.5 4.5zM19 18.5v-1c0-2.21-3.58-4-8-4s-8 1.79-8 4v1h16z"/></svg>
                        </div>
                        <span class="status-badge status-active">Aktif</span>
                    </div>
                    <div class="card-body">
                        <h3>Distribusi Lirik</h3>
                        <p>Kirim lirik lagu Anda agar muncul di Spotify, Instagram, Apple Music, dan platform lainnya.</p>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAqOzMh1oUnzxohMET1SsA8ZpnPm7rgjrY",
            authDomain: "aldotune-records.firebaseapp.com",
            databaseURL: "https://aldotune-records-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "aldotune-records",
            storageBucket: "aldotune-records.firebasestorage.app",
            messagingSenderId: "311200667476",
            appId: "1:311200667476:web:7805289d9d01c981ef5ac1",
            measurementId: "G-GQ3Y2GKWG1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        // --- TIMER 15 MENIT ---
        const SESSION_TIMEOUT = 15 * 60 * 1000;
        setTimeout(() => {
            signOut(auth).then(() => window.location.href = "index.html");
        }, SESSION_TIMEOUT);

        // --- AUTH & DATA ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                const userRef = ref(db, 'users/' + user.uid);
                get(userRef).then((snapshot) => {
                    let finalName = "Pengguna"; 
                    if (snapshot.exists()) {
                        const userData = snapshot.val();
                        if (userData.fullName) {
                            const words = userData.fullName.trim().split(/\s+/);
                            if (words.length >= 2) finalName = words[0] + " " + words[1];
                            else finalName = words[0];
                        } else {
                            finalName = user.email.split('@')[0];
                        }
                    } else {
                        finalName = user.email.split('@')[0];
                    }
                    document.getElementById('displayName').innerText = finalName;
                });
            } else {
                window.location.href = "index.html";
            }
        });

        // --- MENU UI ---
        const userMenuBtn = document.getElementById('userMenuBtn');
        const logoutMenu = document.getElementById('logoutMenu');

        userMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            logoutMenu.style.display = (logoutMenu.style.display === 'block') ? 'none' : 'block';
        });

        document.addEventListener('click', () => {
            logoutMenu.style.display = 'none';
        });

        document.getElementById('btnLogout').addEventListener('click', () => {
            if (confirm("Yakin ingin keluar?")) {
                window.location.href = "index.html";
            }
        });
    </script>
</body>
</html>
