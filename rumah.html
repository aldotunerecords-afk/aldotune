<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Backstage - Gambaran Umum</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><text x='50%' y='50%' dy='.35em' text-anchor='middle' font-size='65' font-family='Arial, sans-serif' font-weight='bold' fill='%23000000'>a</text></svg>">

    <style>
        /* --- 1. GLOBAL RESET --- */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        body { background-color: #f6f6f6; display: flex; height: 100vh; overflow: hidden; color: #333; }
        a { text-decoration: none; color: inherit; }

        /* --- 2. SIDEBAR (BASE STYLE) --- */
        .sidebar {
            width: 240px;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            padding: 24px 0;
            flex-shrink: 0;
            box-shadow: 1px 0 0 #e6e6e6;
            z-index: 100;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            white-space: nowrap; 
        }

        .brand-logo-container {
            height: 50px;
            padding: 0 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between; 
        }

        .aldotune-logo { max-width: 130px; max-height: 40px; object-fit: contain; display: block; transition: opacity 0.2s; }
        
        .mini-logo {
            display: none; width: 40px; height: 40px; background: transparent; color: #000;
            font-family: Arial, sans-serif; font-weight: 900; font-size: 40px;
            align-items: center; justify-content: center; margin: 0 auto;
            line-height: 1; padding-bottom: 5px;
        }

        .close-sidebar-btn {
            background: none; border: none; cursor: pointer; padding: 5px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 4px; transition: background 0.2s;
        }
        .close-sidebar-btn:hover { background: #f0f0f0; }
        .close-sidebar-btn svg { width: 20px; height: 20px; fill: #666; }

        .create-btn-wrapper { padding: 0 24px 16px 24px; transition: 0.3s; }
        .btn-create {
            width: 100%; background-color: #1890ff; color: white; border: none; padding: 12px;
            border-radius: 4px; font-weight: 600; font-size: 14px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            overflow: hidden; transition: 0.3s;
        }
        .btn-create:hover { background-color: #40a9ff; }

        .menu-list { list-style: none; flex-grow: 1; padding-top: 8px; overflow-y: auto; overflow-x: hidden; }
        .menu-list::-webkit-scrollbar { width: 4px; }
        .menu-list::-webkit-scrollbar-thumb { background-color: #ccc; border-radius: 4px; }
        .menu-list::-webkit-scrollbar-track { background-color: transparent; }

        .menu-item {
            display: flex; align-items: center; padding: 12px 24px;
            color: #666; font-size: 14px; cursor: pointer; text-decoration: none;
            border-left: 3px solid transparent; transition: 0.2s;
        }
        .menu-item svg { width: 22px; height: 22px; margin-right: 12px; fill: #8c8c8c; flex-shrink: 0; transition: margin 0.3s; }
        .menu-item-text { transition: opacity 0.2s; opacity: 1; }
        
        .menu-item:hover { color: #1890ff; background-color: #f0f5ff; }
        .menu-item:hover svg { fill: #1890ff; }
        
        .menu-item.active { color: #1890ff; background-color: #e6f7ff; border-left-color: #1890ff; font-weight: 500; }
        .menu-item.active svg { fill: #1890ff; }

        .sidebar-footer { padding: 24px; font-size: 11px; color: #aaa; border-top: 1px solid #f0f0f0; overflow: hidden; }

        /* --- 3. DESKTOP COLLAPSED MODE --- */
        @media (min-width: 769px) {
            body.sidebar-collapsed .sidebar { width: 80px; }
            body.sidebar-collapsed .aldotune-logo { display: none; }
            body.sidebar-collapsed .mini-logo { display: flex; }
            body.sidebar-collapsed .brand-logo-container { padding: 0; justify-content: center; }
            body.sidebar-collapsed .close-sidebar-btn { display: none; }
            body.sidebar-collapsed .create-btn-wrapper { padding: 0 10px 16px 10px; }
            body.sidebar-collapsed .btn-create { width: 48px; height: 48px; padding: 0; border-radius: 50%; margin: 0 auto; gap: 0; }
            body.sidebar-collapsed .btn-text { display: none; }
            body.sidebar-collapsed .menu-item { padding: 12px 0; justify-content: center; }
            body.sidebar-collapsed .menu-item svg { margin-right: 0; }
            body.sidebar-collapsed .menu-item-text { display: none; opacity: 0; }
            body.sidebar-collapsed .sidebar-footer { display: none; }
            body.sidebar-collapsed .menu-item { border-left: none; }
        }

        /* --- 4. MAIN CONTENT --- */
        .main-wrapper { flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto; position: relative; width: 100%; transition: margin 0.3s; }

        .top-header {
            min-height: 64px; display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; background-color: #f6f6f6; position: relative; z-index: 50;
        }

        .header-left { display: flex; align-items: center; gap: 15px; }
        .menu-toggle { 
            background: none; border: none; cursor: pointer; padding: 8px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; transition: 0.2s;
            margin-left: -8px;
        }
        .menu-toggle:hover { background: #e0e0e0; }
        .menu-toggle svg { width: 26px; height: 26px; fill: #444; }

        .page-title { font-size: 18px; font-weight: 600; color: #222; }

        .user-profile { display: flex; align-items: center; text-align: right; gap: 12px; cursor: pointer; }
        .user-details h4 { font-size: 14px; font-weight: 600; color: #333; margin: 0; text-transform: capitalize; }
        .avatar-icon { width: 36px; height: 36px; fill: #999; flex-shrink: 0; }

        /* Logout Menu */
        .logout-menu {
            position: absolute; top: 60px; right: 20px; background: white; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.15); border-radius: 4px; 
            overflow: hidden; display: none; z-index: 101; 
            min-width: 220px; padding: 8px 0; border: 1px solid #eee;
        }
        .dropdown-item {
            display: flex; align-items: center; width: 100%; padding: 12px 20px;
            background: transparent; border: none; text-align: left; cursor: pointer;
            color: #5f6368; font-size: 14px; font-weight: 500; transition: background 0.2s;
        }
        .dropdown-item:hover { background-color: #f5f5f5; color: #333; }
        .dropdown-item svg { width: 18px; height: 18px; margin-right: 15px; fill: #70757a; }
        .dropdown-item:hover svg { fill: #333; }
        .dropdown-divider { height: 1px; background-color: #e0e0e0; margin: 6px 0; }

        /* Hero Banner */
        .hero-banner {
            margin: 0; background: radial-gradient(circle at 30% 50%, #2b2b2b 0%, #1a1a1a 60%, #000000 100%);
            min-height: 280px; display: flex; flex-direction: column; justify-content: center; padding: 40px 60px;
            color: white; position: relative; overflow: hidden;
        }
        .hero-title { font-size: 56px; font-weight: 500; margin-bottom: 10px; line-height: 1.1; }
        .hero-subtitle { font-size: 28px; font-weight: 400; opacity: 0.9; }
        .content-area { background: #f6f6f6; flex-grow: 1; min-height: 200px; }

        .sidebar-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 90; backdrop-filter: blur(2px); transition: opacity 0.3s; }

        /* --- 5. MOBILE STYLE --- */
        @media (max-width: 768px) {
            .sidebar { 
                position: fixed; top: 0; left: 0; height: 100%; width: 280px; 
                transform: translateX(-100%); 
                box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            }
            .sidebar.mobile-active { transform: translateX(0); }
            .sidebar-overlay.active { display: block; }
            .brand-logo-container { padding-right: 20px; margin-bottom: 20px; }
            body.sidebar-collapsed .sidebar { width: 280px; } 
            .top-header { padding: 0 15px; height: 60px; }
            .page-title { display: none; }
            .user-details h4 { font-size: 13px; }
            .avatar-icon { width: 32px; height: 32px; }
            .hero-banner { padding: 30px 20px; min-height: 220px; }
            .hero-title { font-size: 36px; }
            .hero-subtitle { font-size: 18px; margin-top: 5px; }
        }
    </style>
</head>
<body class="sidebar-collapsed">

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <nav class="sidebar" id="sidebar">
        <div class="brand-logo-container">
            <img src="acss.png" alt="Aldotune" class="aldotune-logo">
            <div class="mini-logo">a</div>
            <button class="close-sidebar-btn" id="btnCloseSidebar">
                <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
            </button>
        </div>

        <div class="create-btn-wrapper">
            <a href="satu-rilis.html" class="btn-create">
                <svg viewBox="0 0 24 24" fill="white" style="width:18px; height:18px;"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                <span class="btn-text">Satu rilis</span>
            </a>
        </div>

        <ul class="menu-list">
            <a href="rumah.html" class="menu-item active">
                <svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                <span class="menu-item-text">Gambaran Umum</span>
            </a>
            
            <a href="katalog.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>
                <span class="menu-item-text">Katalog</span>
            </a>

            <a href="publishing.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"/></svg>
                <span class="menu-item-text">Publishing</span>
            </a>

            <a href="hak-cipta.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.8-13h-2.9v1.2c-.8.2-1.4.6-1.8 1.1-.5.6-.7 1.3-.7 2.2 0 1.5.7 2.6 2 3.2.5.2 1.1.3 1.7.3 1.1 0 2-.4 2.7-1.2l-1.3-1.4c-.4.5-.8.7-1.3.7-.4 0-.7-.1-1-.3-.3-.2-.4-.6-.4-1.1 0-.6.2-1.1.5-1.4.3-.3.7-.5 1.1-.5.3 0 .7.1 1 .3l.4.3V7z"/></svg>
                <span class="menu-item-text">Hak Cipta</span>
            </a>

            <a href="spotify.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.59 14.42c-.18.3-.56.4-.85.22-2.34-1.43-5.29-1.75-8.77-.96-.33.07-.66-.14-.74-.47-.07-.32.14-.65.47-.73 3.82-.87 7.11-.51 9.68.9.3.18.39.55.21.84zm1.22-2.71c-.23.37-.71.49-1.08.26-2.69-1.65-6.79-2.13-9.96-1.17-.41.13-.85-.11-.97-.52-.13-.41.11-.85.52-.97 3.62-1.1 8.16-.56 11.23 1.33.37.22.49.7.26 1.07zm.1-2.82c-3.22-1.91-8.53-2.09-11.61-1.15-.49.15-1.01-.13-1.16-.61-.15-.49.13-1.01.61-1.16 3.56-1.08 9.47-.86 13.13 1.31.45.27.6.85.33 1.3-.26.44-.84.59-1.3.31z"/></svg>
                <span class="menu-item-text">Spotify for Artists</span>
            </a>

            <a href="lirik.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M12 13.5c2.48 0 4.5-2.02 4.5-4.5s-2.02-4.5-4.5-4.5-4.5 2.02-4.5 4.5 2.02 4.5 4.5 4.5zM19 18.5v-1c0-2.21-3.58-4-8-4s-8 1.79-8 4v1h16z"/></svg>
                <span class="menu-item-text">Lirik Lagu</span>
            </a>
            
            <a href="analytics.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/></svg>
                <span class="menu-item-text">Analytics</span>
            </a>

            <a href="promosi.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"/></svg>
                <span class="menu-item-text">Promosi</span>
            </a>
            
            <a href="finance.html" class="menu-item">
                <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
                <span class="menu-item-text">Finance</span>
            </a>

            <a href="tim.html" class="menu-item" id="menuTim" style="display: none;">
                <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                <span class="menu-item-text">Tim</span>
            </a>
        </ul>

        <div class="sidebar-footer">Backstage Terms & conditions</div>
    </nav>

    <main class="main-wrapper">
        <header class="top-header">
            <div class="header-left">
                <button class="menu-toggle" id="btnMenuToggle">
                    <svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
                </button>
                <div class="page-title">Gambaran Umum</div>
            </div>

            <div class="user-profile" id="userMenuBtn">
                <div class="user-details">
                    <h4 id="displayName">Memuat...</h4>
                </div>
                <svg class="avatar-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
            </div>

            <div class="logout-menu" id="logoutMenu">
                <a href="profil.html" class="dropdown-item">
                    <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    Profil
                </a>
                <a href="sandi.html" class="dropdown-item">
                    <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                    Kata Sandi
                </a>
                <a href="layanan.html" class="dropdown-item">
                    <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"/></svg>
                    Layanan tambahan
                </a>
                <div class="dropdown-divider"></div>
                <button id="btnLogout" class="dropdown-item" style="color: #d93025;">
                    <svg viewBox="0 0 24 24" style="fill: #d93025;"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
                    Keluar
                </button>
            </div>
        </header>

        <div class="hero-banner">
            <h1 class="hero-title">Halo!</h1>
            <h2 class="hero-subtitle">Selamat datang di Backstage Aldotune!</h2>
        </div>
        
        <div class="content-area"></div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAqOzMh1oUnzxohMET1SsA8ZpnPm7rgjrY",
            authDomain: "aldotune-records.firebaseapp.com",
            databaseURL: "https://aldotune-records-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "aldotune-records",
            storageBucket: "aldotune-records.firebasestorage.app",
            messagingSenderId: "311200667476",
            appId: "1:311200667476:web:7805289d9d01c981ef5ac1",
            measurementId: "G-GQ3Y2GKWG1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        // --- TIMER SESI 15 MENIT ---
        const SESSION_TIMEOUT = 15 * 60 * 1000; // 15 Menit
        let sessionTimer;

        function startSessionTimer() {
            sessionTimer = setTimeout(() => {
                // Saat waktu habis, lempar ke index (login)
                window.location.href = "index.html";
            }, SESSION_TIMEOUT);
        }

        // --- AUTH & DATA ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Token valid -> Mulai Timer
                startSessionTimer();

                const userRef = ref(db, 'users/' + user.uid);
                get(userRef).then((snapshot) => {
                    let finalName = "Pengguna"; 
                    if (snapshot.exists()) {
                        const userData = snapshot.val();
                        if (userData.fullName) {
                            const words = userData.fullName.trim().split(/\s+/);
                            if (words.length >= 2) finalName = words[0] + " " + words[1];
                            else finalName = words[0];
                        } else {
                            finalName = user.email.split('@')[0];
                        }

                        // KHUSUS ADMIN (j: 'a')
                        if (userData.j === 'a') {
                            const menuTim = document.getElementById('menuTim');
                            if(menuTim) menuTim.style.display = 'flex';
                        }
                    } else {
                        finalName = user.email.split('@')[0];
                    }
                    document.getElementById('displayName').innerText = finalName;
                }).catch(() => {
                    document.getElementById('displayName').innerText = user.email.split('@')[0];
                });
            } else {
                // Jika tidak ada user (akses ilegal), tendang ke index
                window.location.href = "index.html";
            }
        });

        // --- UI LOGIC ---
        const btnMenuToggle = document.getElementById('btnMenuToggle');
        const btnCloseSidebar = document.getElementById('btnCloseSidebar'); 
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        btnCloseSidebar.addEventListener('click', () => {
             if (window.innerWidth > 768) {
                 document.body.classList.add('sidebar-collapsed');
             } else {
                 sidebar.classList.remove('mobile-active');
                 sidebarOverlay.classList.remove('active');
             }
        });

        btnMenuToggle.addEventListener('click', () => {
            if (window.innerWidth > 768) {
                document.body.classList.toggle('sidebar-collapsed');
            } else {
                sidebar.classList.toggle('mobile-active');
                sidebarOverlay.classList.toggle('active');
            }
        });

        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.remove('mobile-active');
            sidebarOverlay.classList.remove('active');
        });

        const userMenuBtn = document.getElementById('userMenuBtn');
        const logoutMenu = document.getElementById('logoutMenu');

        userMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            logoutMenu.style.display = (logoutMenu.style.display === 'block') ? 'none' : 'block';
        });

        document.addEventListener('click', () => {
            logoutMenu.style.display = 'none';
        });

        // --- LOGOUT LOGIC (Tanpa signOut) ---
        document.getElementById('btnLogout').addEventListener('click', () => {
            // Langsung arahkan ke index.html, biarkan index menangani logika ganti akun/kunci
            window.location.href = "index.html";
        });
    </script>
</body>
</html>
